---
name: quality-review
description: "复核 pending 目录中的待定情报，帮助用户决定提升到 high/ 或降级到 excluded/。"
---

# 情报质量复核器 (Quality Filter)

## 概述

本 Skill 专注于对爬虫生成的 `pending/` 目录进行人工复核。爬虫已对情报进行了初步质量评分（1-5分），评分 2-3 分的内容被归入 pending/ 待定目录。本 Skill 帮助用户快速审阅这些边界情况，决定是"提升"还是"降级"。

## 输入要求

- **pending 目录路径**：爬虫生成的 `{领域}_{timestamp}/pending/` 目录

## 目录结构说明

爬虫生成的目录结构：
```
{领域}_{timestamp}/
├── high/       ← 高质量 (4-5分) - 无需复核
├── pending/    ← 待定 (2-3分) - 本 Skill 处理对象
└── excluded/   ← 排除 (1分) - 已排除
```

## 处理流程

### 步骤 1：渐进式扫描与分析

采用**渐进式分析**方法，在效率和准确性之间取得平衡：

#### 第一层：快速预判（使用脚本扫描元数据）

使用 `scripts/scan_pending.py` 脚本快速扫描 pending 目录：

```bash
python .claude/skills/quality-review/scripts/scan_pending.py <pending_directory>
```

脚本仅读取每个 `.md` 文件的头部（前 20 行），提取：
- 事件标题、质量评分、评分理由
- 来源、日期、事件分类、所属领域

输出 JSON 格式的元数据列表，按评分排序（低分优先）。

基于元数据进行快速分类：
- **可快速提升**：标题明确有价值（如"XX发布重大更新"），评分理由合理
- **可快速降级**：标题无实质（如"转发"、"广告"），评分理由充分
- **需深度审阅**：无法从元数据确定，需要查看正文

#### 第二层：深度审阅（读取正文）

仅对"需深度审阅"的文件，使用 `view_file` 工具读取完整内容：
- 关键信息（`## 关键信息` 部分）
- 详细内容（`## 详细内容` 部分）
- 补充内容（如有）

基于完整内容做出最终判断。

> 这种渐进式方法可减少 50%+ 的正文读取量，同时保证复核质量。

### 步骤 2：生成复核清单

输出待复核文件清单：

```markdown
## 📋 Pending 情报复核清单

### 目录信息
- 复核目录：{pending 目录路径}
- 待复核数量：{N}

### 文件清单

| 序号 | 事件标题 | 评分 | 评分理由 | 来源 | 操作 |
|-----|---------|------|---------|------|------|
| 1 | {标题} | ⭐⭐⭐ (3/5) | {理由} | {来源} | 提升/保持/降级 |
| 2 | {标题} | ⭐⭐☆ (2/5) | {理由} | {来源} | 提升/保持/降级 |
...

### 快捷操作
- 全部提升到 high/
- 全部保持在 pending/
- 全部降级到 excluded/
- 逐条确认（默认）
```

### 步骤 3：交互式复核

对每个文件，与用户交互确认：

1. **展示文件摘要**：
   - 事件标题
   - 质量评分和理由
   - 关键信息预览（前 300 字）

2. **用户选择**：
   - `提升`：移动到 `../high/` 目录
   - `保持`：保留在 `pending/` 目录
   - `降级`：移动到 `../excluded/` 目录
   - `查看全文`：展示完整内容后再决定

3. **批量操作**：支持对剩余文件批量处理

### 步骤 4：执行调整

根据用户决定移动文件：

```
{领域}_{timestamp}/
├── high/
│   ├── 原有文件.md
│   └── 提升的文件.md    ← 从 pending/ 提升
├── pending/
│   └── 保持的文件.md    ← 保持不动
└── excluded/
    ├── 原有文件.md
    └── 降级的文件.md    ← 从 pending/ 降级
```

### 步骤 5：输出复核报告

```markdown
## ✅ 复核完成

### 执行结果
- 复核文件数：{N}
- 提升到 high/：{A} 个
- 保持在 pending/：{B} 个
- 降级到 excluded/：{C} 个

### 调整明细

**提升到 high/**：
1. {文件名} - {原因}
...

**降级到 excluded/**：
1. {文件名} - {原因}
...

### 后续操作建议
- high/ 目录现有 {X} 份高质量情报
- 可调用 `deep-mining-analyst` Agent 对 high/ 目录进行深度分析
```

## 输出

- **high/ 目录**：包含提升的情报
- **pending/ 目录**：保留待定的情报（通常应为空或极少）
- **excluded/ 目录**：包含降级的情报
- **复核报告**：调整统计和明细

## 注意事项

1. **利用已有评分**：文件中已包含爬虫的质量评分和理由，可作为参考
2. **快速浏览**：优先展示关键信息，避免逐字阅读
3. **批量处理**：当评分理由相似时，支持批量决定
4. **保守原则**：对有疑问的内容，倾向于保持或提升

## 使用示例

**用户输入**：
```
请复核 data/大模型技术和产品_20260204_100000/pending/ 目录
```

**Skill 执行**：
1. 扫描目录，发现 12 个待复核文件
2. 展示复核清单
3. 用户逐条/批量确认
4. 提升 5 个到 high/，降级 3 个到 excluded/，保持 4 个
5. 输出复核报告

**后续操作**：
```
调用 deep-mining-analyst 分析 data/大模型技术和产品_20260204_100000/high/ 目录
```
